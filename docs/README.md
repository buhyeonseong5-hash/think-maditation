# Think - Meditation 앱 기술 문서

이 문서는 "Think - Meditation" 리액트 애플리케이션의 기술적인 구조, 주요 기능, 핵심 로직에 대해 설명합니다.

## 1. 개요

**Think - Meditation**은 사용자가 마음의 평온을 찾도록 돕는 웹 기반 명상 애플리케이션입니다. '호흡 & 숫자 세기'와 '점 명상'이라는 두 가지 명상 모드를 제공하며, 사용자의 집중력 향상을 위해 간단한 기억력 테스트를 포함하고 있습니다.

- **주요 기술 스택**: React, TypeScript, Tailwind CSS
- **핵심 목표**: 사용자가 '생각 없는' 고요한 상태를 경험하도록 유도합니다.

---

## 2. 주요 기능

### 2.1. 내장된 명상 자산 (Embedded Assets)
- 앱은 별도의 설정 없이 바로 사용할 수 있도록 모든 필수 자산(Asset)을 소스 코드에 내장하고 있습니다.
  - **연꽃 이미지**: '점 명상'에서 사용될 이미지.
  - **효과음**: '호흡 & 숫자 세기 명상'에서 숫자가 변경될 때 재생될 사운드.
  - **숫자 음성 (0-9)**: '호흡 & 숫자 세기 명상'에서 숫자를 읽어줄 음성 파일.
- 모든 자산은 Base64로 인코딩되어 있어, 추가적인 다운로드나 사용자 업로드 과정이 필요 없습니다.

### 2.2. 호흡 & 숫자 세기 명상 (Breathing & Counting Meditation)
- **설정**:
  - **명상 시간**: 3분 ~ 60분
  - **카운팅 간격**: 3초 ~ 20초
  - **음원**: 음성, 효과음, 무음 중 선택 가능
- **실행**:
  - 설정된 시간에 따라 카운트다운이 진행됩니다. 숫자는 `(총 시간 / 카운팅 간격)`으로 계산되어 내림차순으로 표시됩니다.
  - 명상 중 무작위로 5개의 알파벳이 숫자 대신 나타납니다.
  - 선택된 음원에 따라 숫자 음성 또는 효과음이 재생됩니다.
- **인터랙티브 배경**: HSL 색상 모델을 기반으로 시간이 지남에 따라 색이 변하는 인터랙티브 파티클 배경이 특징입니다.

### 2.3. 점 명상 (One-Dot Meditation)
- **설정**:
  - **명상 시간**: 3분 ~ 60분
- **실행**:
  - 화면 중앙의 원 안에 연꽃 이미지가 표시됩니다.
  - 명상 중 무작위 시점에 5개의 알파벳이 3초 동안 나타납니다. 알파벳이 나타날 때는 연꽃 이미지가 사라집니다.
  - 배경은 호흡 명상과 동일한 파티클 애니메이션을 사용합니다.

### 2.4. 퀴즈 및 결과
- 명상이 끝나면, 세션 중에 나타났던 5개의 알파벳을 입력하는 퀴즈 화면으로 전환됩니다.
- 정답을 맞히면 축하 메시지와 함께 꽃가루(Confetti) 효과가 나타납니다.

### 2.5. 사용자 경험(UX) 기능
- **화면 잠금 방지**: `useWakeLock` 커스텀 훅을 통해 Screen Wake Lock API를 사용하여 명상 중 기기 화면이 꺼지는 것을 방지합니다.
- **명상 종료**: 각 명상 화면 우측 상단의 'X' 버튼을 통해 진행 중인 명상을 언제든지 중단하고 메인 화면으로 돌아갈 수 있습니다.

---

## 3. 프로젝트 구조

```
/
|-- index.html              # 메인 HTML 파일
|-- index.tsx               # React 앱 진입점
|-- App.tsx                 # 최상위 컴포넌트 (상태 관리 및 라우팅)
|-- types.ts                # TypeScript 타입 정의
|-- assets.ts               # Base64 인코딩된 기본 자산
|
|-- components/             # UI 컴포넌트
|   |-- BreathingMeditation.tsx
|   |-- BreathingSettings.tsx
|   |-- Confetti.tsx
|   |-- DotMeditation.tsx
|   |-- DotSettings.tsx
|   |-- HomeScreen.tsx
|   |-- ParticleCanvas.tsx
|   |-- QuizScreen.tsx
|   |-- ResultScreen.tsx
|   `-- Slider.tsx
|
|-- hooks/                  # 커스텀 React 훅
|   `-- useWakeLock.ts
|
`-- docs/                   # 문서 폴더
    `-- README.md
```

---

## 4. 핵심 로직 및 구현

### 4.1. 상태 관리 및 화면 전환
- `App.tsx` 컴포넌트에서 모든 앱의 상태와 화면 전환 로직을 관리합니다.
- `useState` 훅과 `AppScreen` 열거형(enum)을 사용하여 현재 표시할 화면을 결정합니다.
- 명상 설정, 퀴즈 정답 등 필요한 데이터는 `App.tsx`의 state로 관리되며, 각 컴포넌트에 props로 전달됩니다.

### 4.2. 명상 타이머 및 이벤트 로직
- `useEffect` 훅과 `setInterval`을 사용하여 명상 타이머를 구현합니다.
- 남은 시간(`timeLeft`)을 1초마다 감소시키고, 이 값에 따라 화면에 표시되는 숫자나 이벤트를 트리거합니다.
- 알파벳이 나타나는 시점은 명상 시작 시 무작위로 결정되어 `useRef`에 저장해두고 사용합니다.
- 종료 버튼 클릭 시 `App.tsx`에 있는 `handleBackToHome` 함수를 호출하여 화면을 전환합니다.

### 4.3. 자산(Asset) 관리
- 모든 자산은 `assets.ts` 파일에 Base64 문자열로 저장되어 있습니다.
- `App.tsx`가 로드될 때 이 자산들을 `useState`의 초기값으로 설정합니다.
- 오디오 재생은 `new Audio(base64String)`을 통해 이루어집니다.